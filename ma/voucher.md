# 卡券
> 制作和生产卡券，包括兑换券、代金券、打折券 

# 1.小云积分介绍
`小云积分`是由`汉云优品`开发并运营的积分共享平台，让新生的数据垃圾[积分]得以更有效的利用，通过小云积分，可以将第三方平台积分导入到小云的`积分总线`系统，对积分进行了重新定义，并赋予了新的能量，可在与小云合作的实体商户进行商品/优惠券的兑换。
# 2.卡券类型
卡券类型方面，为和微信公众平台卡券打通，卡券类型和公众平台保持一致，分为

|卡券类型|功能描述|
|--------|
|兑换券|可直接兑换某商品|
|代金券|可抵扣一定数量的现金|
|打折券|对商品进行打折|

?>满减券：对于满减券的实现，代金券可设置使用条件，例如消费满一定金额可用，既可以实现满减券

# 3.卡券创建
todo
# 4.卡券列表
### 4.1原型/效果图
![](ma/media/15078017134873.jpg)

### 4.2操作流程

### 4.3信息结构
![](ma/media/15078020654416.jpg)

### 4.4用例
|用例名称|创建卡券|
|-------|
|行为角色|有权限的操作人员|
|需求目的|创建新的卡券|
|前置条件|已登录，有权限|
|后置条件|弹出卡券类型选择界面|

|用例名称|检索|
|-------|
|行为角色|有权限的操作人员|
|需求目的|通过条件完成对卡券的筛选|
|前置条件|已登录，有权限|
|后置条件|完成筛选工作，更新列表内容|


### 4.5退出机制
|操作类型|目标控件|去向|
|-------|
|点击|当前页tab关闭按钮|见注释4.5.1|
?>注4.5.1:详情页，编辑页，创建页，切对应的列表页未关闭，则关闭当前页跳转到列表页，否则跳转到前一页

### 4.6显示及排序机制
|内容控件|加载方式|显示内容|容量|排序机制|刷新机制|新数据加载|
|-------|
|卡券列表|异步加载|文字|10|卡券创建时间倒序|无|翻页/检索|

### 4.7缓存机制
|缓存控件|缓存内容|容量|
|-------|
|卡券列表|文字|10|
?>注4.7.1 缓存只需要在多页面切换时保存

### 4.8控件描述
|控件描述|控件类型|操作|触发源|触发时|触发后|备注|
|-------|
|检索-兑换码名称|input|点击|控件本身|获取焦点|完成输入|-|
|检索-批次|input|点击|控件本身|获取焦点|完成输入|-|
|检索-状态|select|点击|控件本身|弹出下拉框|完成选择|-|
|创建|button|点击|控件本身|弹出卡券创建页面|-|-|
|列表-编辑|button|点击|控件本身|打开卡券编辑页|-|-|
|列表-查看|button|点击|控件本身|打开卡券详情页|-|-|
### 4.9临界值和数据验证
|字段|数据类型|数据长度|验证方案|必填项|
|-------|
|检索-兑换码名称|String|20||否|
|检索-批次/前缀|String|4||否|
|检索-状态|select| - ||否|
### 4.10异常处理
|异常情况|执行操作|处理方式|
|-------|
|无数据|打开页面/翻译|提示无数据|
|无数据|检索|提示无数据|
|各label文字过长产生错位|打开页面|保证数据完整性|

# 5.惠币兑换码生成
### 5.0需求描述
在和第三方平台对接过程中，我们原本希望得到积分导入的`API`，我们认为这是最佳的积分导入方案。

?>用户将授权→确认导入积分数量→第三方平台API→完成导入积分

但是由于部分平台暂无此类API，且研发团队排期已满，为了不影响小云积分的正常推广和平台的对接，我们推出惠币兑换码功能，本功能类似的游戏的充值卡，通过惠币兑换码，可在小云积分应用内直接兑换惠币。我们将生产好的惠币兑换码在第三方平台积分商城上架，从而完成积分的流通。

?>第三方平台积分兑换惠币兑换码→小云积分输入兑换码→完成积分导入

### 5.1原型/效果图
![卡券列表](/ma/media/15077965377903.jpg)
### 5.2操作流程

### 5.3信息结构
![](ma/media/15078020654416.jpg)

### 5.4用例
|用例名称|创建兑换码|
|-------|
|行为角色|有权限的操作人员|
|需求目的|创建新的兑换码|
|前置条件|已登录，有权限|
|后置条件|弹出卡券类型选择界面|

|用例名称|检索|
|-------|
|行为角色|有权限的操作人员|
|需求目的|通过条件完成对惠币兑换码的筛选|
|前置条件|已登录，有权限|
|后置条件|完成筛选工作，更新列表内容|


### 5.5退出机制
|操作类型|目标控件|去向|
|-------|
|点击|当前页tab关闭按钮|见注释4.5.1|
?>注4.5.1:详情页，编辑页，创建页，切对应的列表页未关闭，则关闭当前页跳转到列表页，否则跳转到前一页

### 5.6显示及排序机制
|内容控件|加载方式|显示内容|容量|排序机制|刷新机制|新数据加载|
|-------|
|兑换码列表|异步加载|文字|10|卡券创建时间倒序|无|翻页/检索|

### 5.7缓存机制
|缓存控件|缓存内容|容量|
|-------|
|兑换码列表|文字|10|
?>注4.7.1 缓存只需要在多页面切换时保存

### 5.8控件描述
|控件描述|控件类型|操作|触发源|触发时|触发后|备注|
|-------|
|检索-兑换码名称|input|点击|控件本身|获取焦点|完成输入|-|
|检索-批次|input|点击|控件本身|获取焦点|完成输入|-|
|检索-状态|select|点击|控件本身|弹出下拉框|完成选择|-|
|创建|button|点击|控件本身|弹出卡券创建页面|-|-|
|列表-编辑|button|点击|控件本身|打开兑换码编辑页|-|-|
|列表-查看|button|点击|控件本身|打开兑换码详情页|-|-|
### 5.9临界值和数据验证
|字段|数据类型|数据长度|验证方案|必填项|
|-------|
|检索-兑换码名称|String|20||否|
|检索-批次/前缀|String|4||否|
|检索-状态|select| - ||否|
### 5.10异常处理
|异常情况|执行操作|处理方式|
|-------|
|无数据|打开页面/翻译|提示无数据|
|无数据|检索|提示无数据|
|各label文字过长产生错位|打开页面|保证数据完整性|
# 核销记录查询
todo

